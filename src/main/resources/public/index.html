<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Tiny URL for Location</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

<script src="http://maps.googleapis.com/maps/api/js">
</script>


<script>
var myCenter=new google.maps.LatLng(12.933343,77.6098288);
var loc ;
function httpGet()
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", "/api/v1/shortUrl?lat="+loc.lat()+"&lng="+loc.lng(), false ); // false for synchronous request
    xmlHttp.send( null );
    var newURL = xmlHttp.responseText;
    document.getElementById('shortURL').innerHTML = 'Short URL : <a href="'+newURL+'">'+newURL+'</a><br/> Location  :  ( '+loc.lat()+' , '+loc.lng()+' )';
    
    shortURLLoc
    return xmlHttp.responseText;
}
function initialize()
{
var mapProp = {
  center:myCenter,
  zoom:17,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

var marker=new google.maps.Marker({
  // position: latlng,
     position:myCenter,
  });

	marker.setMap(map);

	var infowindow = new google.maps.InfoWindow({
	content:"Hello World!"
	});
	
/*google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
  });*/
  
  google.maps.event.addListener(map, 'click', function(event) {
   placeMarker(event.latLng);
   //alert(marker.position);
   loc = marker.position;
});

function placeMarker(location) {
//marker.position = location;
	marker.setMap(null);
    marker = new google.maps.Marker({
		position: location, 
        map: map
    });
	 //infowindow.open(map,marker);
}
}

google.maps.event.addDomListener(window, 'load', initialize);


   
</script>
	</head>
	<body>
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="index.html" class="logo">
									<span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Tiny URL for Location</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="index.html">Home</a></li>
							
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<header>
								<h2>This is to generate Tiny URL for your event location<br />
								</h2>
							</header>
							<div id="googleMap" style="width: 1000px; height: 380px;"></div>
							<br/>
							<br/>
							<ul class="actions">
							<li><button type="button" onclick="httpGet()" value="Button">Generate Short URL</button>
							
										</li>
										
							</ul>
							<ul class="actions">
							<li><label for="shortURL" id="shortURL"></label></li>
							</ul>
							<div class="field">
							<label for="shortURLLoc" id="shortURLLoc"></label>
							</div>
							<div class="field">
								
										
							</div>
						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">
							
							
							<ul class="copyright">
								<li>&copy; Untitled. All rights reserved</li><li>Owners: Janki & Harikrushna</a></li>
							</ul>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>